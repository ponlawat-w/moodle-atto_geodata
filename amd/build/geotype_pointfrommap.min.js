define ("atto_geodata/geotype_pointfrommap",["jquery","local_leaflet/core","local_leaflet/osmbasemap"],function(a,b,c){return{_map:null,_point:null,_marker:null,setPoint:function setPoint(c){if(c&&c.lat&&c.lng){this._point=c;if(this._marker){this._marker.setLatLng(this._point)}else{this._marker=b.marker(this._point);this._map.addLayer(this._marker)}a("#atto_geodata-latlng").html("[[LAT]]: ".concat(this._point.lat,", [[LNG]]: ").concat(this._point.lng))}else{this._point=null;if(this._marker){this._map.removeLayer(this._marker)}a("#atto_geodata-latlng").html("[[NOPOINT]]")}},init:function init(d){var e=a("#atto_geodata-body");a("<div>").attr("id","atto_geodata-latlng").addClass("text-center").html("[[NOPOINT]]").appendTo(e);a("<div>").attr("id","atto_geodata-map").css("width","100%").css("height","50vh").appendTo(e);this._map=b.map("atto_geodata-map");this._map.addLayer(c);this._map.setView([0,0],1);this._map.on("click",function(a){this.setPoint(a.latlng)}.bind(this));a("#atto_geodata-map").addClass("leaflet-crosshair");if(d){var f=d.split(",").map(function(a){return parseFloat(a.trim())});if(1<f.length){this.setPoint({lat:f[0],lng:f[1]})}}},save:function save(){if(this._point&&this._point.lat&&this._point.lng){var b=a("<span>").addClass("filter-geodata filter-geodata-point").html("".concat(this._point.lat,",").concat(this._point.lng));return b[0].outerHTML}return!1},dispose:function dispose(){if(this._map){if(this._marker){this._marker.remove()}this._marker=null;if(this._map){this._map.off();this._map.remove()}this._map=null}}}});
//# sourceMappingURL=geotype_pointfrommap.min.js.map
