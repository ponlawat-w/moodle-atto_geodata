{"version":3,"sources":["../src/geotype_geojson.js"],"names":["define","$","L","init","defaultValue","$alert","attr","addClass","hide","$textarea","css","val","html","append","_alert","text","show","save","data","trim","M","str","atto_geodata","geojsonempty","json","JSON","parse","geojsoninvalid","geojson","geoJson","$result","outerHTML","err","dispose"],"mappings":"AAAAA,OAAM,gCAAC,CACL,QADK,CAEL,oBAFK,CAAD,CAGD,SACDC,CADC,CACEC,CADF,QAEG,CACJC,IAAI,CAAE,eAA6B,IAAnBC,CAAAA,CAAmB,wDAAJ,EAAI,CAC3BC,CAAM,CAAGJ,CAAC,CAAC,OAAD,CAAD,CACZK,IADY,CACP,IADO,CACD,4BADC,EAEZC,QAFY,CAEH,yBAFG,CADkB,CAIjCF,CAAM,CAACG,IAAP,GAEA,GAAMC,CAAAA,CAAS,CAAGR,CAAC,CAAC,YAAD,CAAD,CACfK,IADe,CACV,IADU,CACJ,sBADI,EAEfI,GAFe,CAEX,aAFW,CAEI,WAFJ,EAGfA,GAHe,CAGX,QAHW,CAGD,MAHC,EAIfH,QAJe,CAIN,mBAJM,EAKfI,GALe,CAKXP,CALW,CAAlB,CAOAH,CAAC,CAAC,oBAAD,CAAD,CAAwBW,IAAxB,CAA6BP,CAA7B,EAAqCQ,MAArC,CAA4CJ,CAA5C,CACD,CAfG,CAgBJK,MAAM,CAAE,gBAASC,CAAT,CAAe,CACrBd,CAAC,CAAC,6BAAD,CAAD,CAAiCW,IAAjC,CAAsCG,CAAtC,EAA4CC,IAA5C,EACD,CAlBG,CAmBJC,IAAI,CAAE,eAAW,CACf,GAAI,CACF,GAAMC,CAAAA,CAAI,CAAGjB,CAAC,CAAC,uBAAD,CAAD,CAA2BU,GAA3B,EAAb,CAEA,GAAI,CAACO,CAAI,CAACC,IAAL,EAAL,CAAkB,CAChB,KAAMC,CAAAA,CAAC,CAACC,GAAF,CAAMC,YAAN,CAAmBC,YAC1B,CAED,GAAMC,CAAAA,CAAI,CAAGC,IAAI,CAACC,KAAL,CAAWR,CAAX,CAAb,CACA,GAAI,CAACM,CAAL,CAAW,CACT,KAAMJ,CAAAA,CAAC,CAACC,GAAF,CAAMC,YAAN,CAAmBK,cAC1B,CAED,GAAMC,CAAAA,CAAO,CAAG1B,CAAC,CAAC2B,OAAF,CAAUL,CAAV,CAAhB,CACA,GAAI,CAACI,CAAL,CAAc,CACZ,KAAMR,CAAAA,CAAC,CAACC,GAAF,CAAMC,YAAN,CAAmBK,cAC1B,CAED,GAAMG,CAAAA,CAAO,CAAG7B,CAAC,CAAC,QAAD,CAAD,CACbM,QADa,CACJ,uCADI,EAEbK,IAFa,CAERM,CAFQ,CAAhB,CAGA,MAAOY,CAAAA,CAAO,CAAC,CAAD,CAAP,CAAWC,SAEnB,CAAC,MAAOC,CAAP,CAAY,CACZ,KAAKlB,MAAL,CAAYkB,CAAZ,EACA,QACD,CAEF,CA/CG,CAgDJC,OAAO,CAAE,kBAAM,CAAE,CAhDb,CAFH,CAHC,CAAN","sourcesContent":["define([\n  'jquery',\n  'local_leaflet/core'\n  ], (\n    $, L\n  ) => ({\n    init: function (defaultValue = '') {\n      const $alert = $('<div>')\n        .attr('id', 'atto_geodata-geojson_alert')\n        .addClass('alert alert-danger mt-2');\n      $alert.hide();\n\n      const $textarea = $('<textarea>')\n        .attr('id', 'atto_geodata-geojson')\n        .css('font-family', 'monospace')\n        .css('height', '50vh')\n        .addClass('form-control mt-2')\n        .val(defaultValue);\n\n      $('#atto_geodata-body').html($alert).append($textarea);\n    },\n    _alert: function(text) {\n      $('#atto_geodata-geojson_alert').html(text).show();\n    },\n    save: function() {\n      try {\n        const data = $('#atto_geodata-geojson').val();\n\n        if (!data.trim()) {\n          throw M.str.atto_geodata.geojsonempty;\n        }\n\n        const json = JSON.parse(data);\n        if (!json) {\n          throw M.str.atto_geodata.geojsoninvalid;\n        }\n        \n        const geojson = L.geoJson(json);\n        if (!geojson) {\n          throw M.str.atto_geodata.geojsoninvalid;\n        }\n\n        const $result = $('<span>')\n          .addClass('filter-geodata filter-geodata-geojson')\n          .html(data);\n        return $result[0].outerHTML;\n\n      } catch (err) {\n        this._alert(err);\n        return false;\n      }\n\n    },\n    dispose: () => {}\n  })\n);\n"],"file":"geotype_geojson.min.js"}