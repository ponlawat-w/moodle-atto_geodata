{"version":3,"sources":["../src/init.js"],"names":["define","$","OpenDialogue","GetGeodataFormat","initCss","url","M","cfg","wwwroot","length","attr","appendTo","host","$editor","editor","_node","on","e","$target","target","type","html","then","data","replaceWith","updateOriginal","catch"],"mappings":"AAAAA,OAAM,qBAAC,CACL,QADK,CAEL,uBAFK,CAGL,iCAHK,CAAD,CAIH,SAACC,CAAD,CACDC,CADC,CAEDC,CAFC,CAGE,CACH,GAAMC,CAAAA,CAAO,CAAG,UAAM,CACpB,GAAMC,CAAAA,CAAG,CAAGC,CAAC,CAACC,GAAF,CAAMC,OAAN,CAAgB,4CAA5B,CACA,GAAI,CAACP,CAAC,uBAAeI,CAAf,QAAD,CAAyBI,MAA9B,CAAsC,CACpCR,CAAC,CAAC,QAAD,CAAD,CACGS,IADH,CACQ,KADR,CACe,YADf,EAEGA,IAFH,CAEQ,MAFR,CAEgB,UAFhB,EAGGA,IAHH,CAGQ,MAHR,CAGgBL,CAHhB,EAIGM,QAJH,CAIYV,CAAC,CAAC,MAAD,CAJb,CAKD,CACF,CATD,CAWA,MAAO,UAAAW,CAAI,CAAI,CACbR,CAAO,GAEP,GAAMS,CAAAA,CAAO,CAAGZ,CAAC,CAACW,CAAI,CAACE,MAAL,CAAYC,KAAb,CAAjB,CACAF,CAAO,CAACG,EAAR,CAAW,OAAX,CAAoB,iBAApB,CAAuC,SAAAC,CAAC,CAAI,IACpCC,CAAAA,CAAO,CAAGjB,CAAC,CAACgB,CAAC,CAACE,MAAH,CADyB,CAEpCC,CAAI,CAAGjB,CAAgB,CAACe,CAAD,CAFa,CAG1C,GAAIE,CAAJ,CAAU,CACRlB,CAAY,CAACkB,CAAD,CAAOF,CAAO,CAACG,IAAR,EAAP,CAAZ,CACGC,IADH,CACQ,SAASC,CAAT,CAAe,CACnBL,CAAO,CAACM,WAAR,CAAoBvB,CAAC,CAACsB,CAAD,CAArB,EACAX,CAAI,CAACa,cAAL,EACD,CAJH,EAIKC,KAJL,CAIW,UAAW,CAAE,CAJxB,CAKD,CACF,CAVD,CAWD,CACF,CAnCK,CAAN","sourcesContent":["define([\n  'jquery',\n  'atto_geodata/dialogue',\n  'filter_geodata/getgeodataformat'\n], ($,\n  OpenDialogue,\n  GetGeodataFormat\n) => {\n  const initCss = () => {\n    const url = M.cfg.wwwroot + '/lib/editor/atto/plugins/geodata/style.css';\n    if (!$(`link[href=\"${url}\"]`).length) {\n      $('<link>')\n        .attr('rel', 'stylesheet')\n        .attr('type', 'text/css')\n        .attr('href', url)\n        .appendTo($('head'));\n    }\n  };\n\n  return host => {\n    initCss();\n\n    const $editor = $(host.editor._node);\n    $editor.on('click', '.filter-geodata', e => {\n      const $target = $(e.target);\n      const type = GetGeodataFormat($target);\n      if (type) {\n        OpenDialogue(type, $target.html())\n          .then(function(data) {\n            $target.replaceWith($(data));\n            host.updateOriginal();\n          }).catch(function() {});\n      }\n    });\n  };\n});\n"],"file":"init.min.js"}